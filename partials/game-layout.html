<!-- ============================================ -->
<!-- GAME LAYOUT (for GameScene) -->
<!-- ============================================ -->
<div id="game-layout" class="w-full flex flex-col items-center gap-2">
    <header class="text-center mt-2 w-full flex flex-col items-center">
        <h1 class="text-2xl md:text-3xl font-bold tracking-[0.35em] text-cyan-400 uppercase mb-2">Skyline Survivors</h1>

        <!-- External HUD Container -->
        <div id="hud-container" class="w-full bg-slate-900/90 border border-slate-700 p-2 rounded-lg flex flex-col gap-1 shadow-lg relative z-10">
            <div class="flex flex-wrap justify-between items-center text-xs md:text-sm font-orbitron font-bold px-2 gap-3">
                <div class="text-cyan-400 w-32 text-left">SCORE: <span id="score-el">000000</span></div>
                <div class="flex flex-col text-[10px] md:text-xs text-emerald-300 uppercase tracking-[0.15em] min-w-[110px]">
                    <div>Cargo: <span id="cargo-el">00</span></div>
                    <div>Ops: <span id="operatives-el">00</span></div>
                </div>
                <div class="text-amber-400 text-center flex-1" id="wave-el">WAVE 1  ENEMIES: 020</div>
                <div class="text-white text-center flex-1 hidden" id="timer-el">TIME: 00:00</div>
                <div class="flex gap-3 justify-end w-auto md:w-60 items-center">
                    <div class="text-green-400">BOMBS: <span id="bombs-el">3</span></div>
                    <div class="text-fuchsia-400">LIVES: <span id="lives-el">3</span></div>
                    <button id="fullscreen-toggle" type="button" class="px-2 py-1 rounded border border-cyan-400/70 text-cyan-200 text-[10px] md:text-xs uppercase tracking-[0.2em] hover:border-cyan-200">
                        Fullscreen
                    </button>
                </div>
            </div>

            <div id="assault-hud" class="hidden px-2 pb-1">
                <div class="flex items-center justify-between text-[10px] uppercase tracking-[0.2em] text-orange-200">
                    <span>Assault Objective</span>
                    <span id="assault-core-label">Core 0/0</span>
                </div>
                <div class="relative h-2 bg-slate-900 border border-orange-400/40 rounded overflow-hidden">
                    <div id="assault-core-fill" class="absolute left-0 top-0 h-full bg-orange-500"></div>
                </div>
                <div class="flex items-center justify-between text-[10px] text-slate-300 mt-1">
                    <span id="assault-shield-label">Shields: 0</span>
                    <span class="text-orange-300">Hold the line until the core fails.</span>
                </div>
            </div>

            <div id="boss-hud" class="hidden px-2 pb-1">
                <div class="flex items-center justify-between text-[10px] uppercase tracking-[0.2em] text-red-200">
                    <span id="boss-name-label">Boss Target</span>
                    <span id="boss-hp-label">HP 0/0</span>
                </div>
                <div class="relative h-2 bg-slate-900 border border-red-400/40 rounded overflow-hidden">
                    <div id="boss-hp-fill" class="absolute left-0 top-0 h-full bg-red-500"></div>
                </div>
                <div class="flex items-center justify-between text-[10px] text-slate-300 mt-1">
                    <span class="text-red-300">Stay mobile and keep firing.</span>
                </div>
            </div>

            <div id="mothership-hud" class="hidden px-2 pb-1">
                <div class="flex items-center justify-between text-[10px] uppercase tracking-[0.2em] text-sky-200">
                    <span>Mothership Core</span>
                    <span id="mothership-core-label">Core 0/0</span>
                </div>
                <div class="relative h-2 bg-slate-900 border border-sky-400/40 rounded overflow-hidden">
                    <div id="mothership-core-fill" class="absolute left-0 top-0 h-full bg-sky-500"></div>
                </div>
                <div class="flex items-center justify-between text-[10px] text-slate-300 mt-1">
                    <span id="mothership-phase-label">Phase 1</span>
                    <span class="text-sky-300">Break the core shield.</span>
                </div>
            </div>

            <div class="flex flex-wrap justify-between items-center text-[10px] md:text-xs font-orbitron px-2 gap-2">
                <div id="district-el" class="text-sky-200 uppercase tracking-wider">DISTRICT: Free Patrol</div>
                <div id="threat-el" class="text-amber-200 uppercase tracking-wider flex-1 text-center">THREAT: Neutral</div>
                <div id="reward-el" class="text-emerald-200 uppercase tracking-wider text-right w-44">REWARDS: x1.00 standard loot</div>
            </div>

            <div id="radar-container" class="w-full h-[40px] bg-black border border-cyan-900 relative overflow-hidden rounded">
                <canvas id="radar-canvas" width="800" height="40" class="w-full h-full block"></canvas>
            </div>

            <div id="decay-hud" class="flex flex-col gap-1 px-2">
                <div class="flex items-center justify-between text-[10px] uppercase tracking-[0.2em] text-cyan-200">
                    <span id="decay-primary-label">PRIMARY</span>
                    <span id="decay-primary-tier">T0</span>
                </div>
                <div class="relative h-2 bg-slate-900 border border-cyan-400/40 rounded overflow-hidden">
                    <div id="decay-primary-fill" class="absolute left-0 top-0 h-full bg-cyan-500"></div>
                </div>
                <div class="flex gap-2 text-[9px] uppercase tracking-[0.2em] text-slate-300">
                    <div class="flex-1">
                        <div class="relative h-1.5 bg-slate-900 border border-slate-600/60 rounded overflow-hidden">
                            <div id="decay-coverage-fill" class="absolute left-0 top-0 h-full bg-emerald-400"></div>
                        </div>
                        <div id="decay-coverage-label" class="mt-0.5 text-[9px] text-slate-400">Coverage</div>
                    </div>
                    <div class="flex-1">
                        <div class="relative h-1.5 bg-slate-900 border border-slate-600/60 rounded overflow-hidden">
                            <div id="decay-missile-fill" class="absolute left-0 top-0 h-full bg-fuchsia-400"></div>
                        </div>
                        <div id="decay-missile-label" class="mt-0.5 text-[9px] text-slate-400">Homing</div>
                    </div>
                    <div class="flex-1">
                        <div class="relative h-1.5 bg-slate-900 border border-slate-600/60 rounded overflow-hidden">
                            <div id="decay-overdrive-fill" class="absolute left-0 top-0 h-full bg-orange-400"></div>
                        </div>
                        <div id="decay-overdrive-label" class="mt-0.5 text-[9px] text-slate-400">Overdrive</div>
                    </div>
                </div>
                <div id="decay-status-strip" class="flex flex-wrap gap-1 text-[9px] uppercase tracking-[0.2em] text-slate-400"></div>
            </div>

            <div class="text-[10px] md:text-xs text-cyan-200 font-orbitron min-h-[1.5em] text-center tracking-wider" id="powerups-el"></div>
        </div>
    </header>

    <main class="w-full flex-1 flex flex-col items-center gap-3 overflow-hidden">
        <div id="gameplay-shell" class="relative w-full flex flex-col items-center gap-3">
            <div id="gameplay-radar-slot" class="w-full max-w-6xl"></div>
            <div id="game-container" class="relative bg-black border border-slate-700 shadow-2xl overflow-hidden rounded-b-lg w-full max-w-6xl">
                <!-- Phaser canvas renders here in game mode -->
            </div>
            <button id="fullscreen-overlay-toggle" type="button">Exit Fullscreen</button>
        </div>
        <p id="controls-text" class="text-[10px] md:text-xs text-slate-400 text-center leading-relaxed">
            Desktop Controls:
            <span class="text-cyan-300">Arrow Keys</span> = Move/Aim (Bulwark; diagonals supported),
            <span class="text-cyan-300">Up</span> = Jump/Aim Up,
            <span class="text-cyan-300">Down</span> = Aim Down (airborne),
            <span class="text-cyan-300">Space</span> = Fire (move + shoot),
            <span class="text-cyan-300">Shift</span> = Transform,
            <span class="text-cyan-300">B</span> = Bomb,
            <span class="text-cyan-300">E</span> = Eject,
            <span class="text-cyan-300">R</span> = Enter Mech,
            <span class="text-cyan-300">Q</span> = Hyperspace,
            <span class="text-cyan-300">Tab</span> = Switch Primary,
            <span class="text-cyan-300">P</span> = Pause.
        </p>
        <div id="build-controls" class="flex flex-wrap justify-center gap-2 text-[10px] md:text-xs">
            <button id="build-toggle" onclick="openBuildView()" class="px-3 py-2 rounded bg-slate-800/90 border border-cyan-700 text-cyan-200 uppercase tracking-[0.15em] shadow-lg hover:border-cyan-400">
                Open Build / Map
            </button>
        </div>
    </main>

    <div id="touch-controls" class="mt-2 w-full max-w-3xl flex justify-between gap-4 select-none md:hidden">
        <div class="flex gap-2">
            <button data-dir="left" class="tc-btn px-4 py-3 rounded bg-slate-800/80 border border-slate-600 text-xs">◀</button>
            <button data-dir="right" class="tc-btn px-4 py-3 rounded bg-slate-800/80 border border-slate-600 text-xs">▶</button>
            <button data-dir="up" class="tc-btn px-4 py-3 rounded bg-slate-800/80 border border-slate-600 text-xs">▲</button>
            <button data-dir="down" class="tc-btn px-4 py-3 rounded bg-slate-800/80 border border-slate-600 text-xs">▼</button>
        </div>
        <div class="flex gap-2">
            <button data-action="fire" class="tc-btn px-4 py-3 rounded-full bg-emerald-600/80 border border-emerald-400 text-xs font-semibold">FIRE</button>
            <button data-action="bomb" class="tc-btn px-4 py-3 rounded-full bg-fuchsia-700/80 border border-fuchsia-400 text-[10px] font-semibold">BOMB</button>
        </div>
    </div>

    <footer id="footer-note" class="mt-3 mb-4 text-[10px] text-slate-600 text-center">
        Prototype build – we can iterate on enemies, waves, balance, and visuals next.
    </footer>
</div>
