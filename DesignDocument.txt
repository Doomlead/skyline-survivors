# Skyline Survivors: Urban Defender â€“ Design Document v2.0

## 1. Core Concept
A modern reimagining of *Defender/Stargate* fused with *Strike Force*, *Vampire Survivors*, and *Blaster Master*-style vehicle/foot combat.

**Key Themes:**
*   **Defend and Reclaim:** Districts exist in three states (Friendly, Threatened, Occupied).
*   **Active Deployment:** Humans are not just scoring items; they are the ammunition for your ground game.
*   **Seamless Transition:** Shift between piloting a heavy strike ship and fighting on foot as a Squad Leader.
*   **The "Comrade" System:** Rescued civilians become armed operatives that provide fire-and-forget support.

**The Hook:** High-intensity "sensory jackpot" combat combined with a strategic layer that leverages Loss Aversion and specific "Rescue-to-Deploy" gameplay loops.

---

## 2. High-Level Structure

### 2.1. System View Orbital Map
**Purpose:** Strategic command center showing planetary control status.
**Elements:**
*   **City Districts (Nodes):**
    *   ðŸŸ¢ **Friendly (Secured):** Accumulates "Prosperity Multiplier" (resources).
    *   ðŸŸ¡ **Threatened (Under Attack):** Requires Defense Mission. Timer based.
    *   ðŸ”´ **Occupied (Enemy Controlled):** Requires Assault Mission. Prosperity reset to zero (Loss Aversion).
*   **The "Near-Miss" Timer:** When a Threatened timer hits zero, it flashes "CRITICAL" for 30s. Starting a mission here grants a "Clutch Defense" bonus.
*   **Roaming Battleships:** Mobile boss nodes that block progress/shop items.

**Mechanics:**
*   **Consequence System:** Ignoring Threatened â†’ District falls to Occupied â†’ Requires Assault.
*   **Victory Condition:** Secure all districts â†’ Unlock Mothership assault.

### 2.2. Side-Scrolling Combat View
**Perspective:** Horizontal wraparound map above a cityscape.
*   **Defense Missions:** Defend 1 fixed **Extraction Hub (Fortified Hangar)**. 15 Waves.
*   **Assault Missions:** Push into enemy territory to destroy a Ground Base.
*   **Key Features:** Radar HUD, Parallax Cityscape, Day/Night Cycle.

### 2.3. Meta Progression & Shop
**2.3.1. The "Supply Drop" Gacha Shop**
*   **Concept:** Variable Ratio Reinforcement. Spend credits on "Supply Drops" for single-mission advantages.
*   **Inventory:** Items are "Hot Starts" (e.g., start with Tier 2 Laser) that apply only to the next run.

**2.3.2. The Shop "Dopamine" Sequence**
*   **Visuals:** Satellite charges energy (color indicates rarity) -> Pod slams into hangar (Screen Shake) -> God Rays reveal item.
*   **Audio:** Shepard Tone build-up -> Bass Thud -> Casino Win Chime.

---

## 3. Gameplay Overview & The Rescue Loop

### 3.1. The Rescue & Drop-Off Loop
Instead of humans being passive scoring items, they are the primary resource for ground-game momentum.

1.  **Extraction Hubs:** Each district features 1 fixed aerial **Fortified Hangar** (Drop-off Point). These are the only locations where civilians can be converted into "Comrades."
2.  **The "Strike Force" Carry:** When the Aegis hovers over a human, they are tractor-beamed into cargo.
    *   *Mechanic:* Carrying humans increases ship weight/inertia.
    *   *Risk/Reward:* Holding multiple humans yields a higher deployment bonus but makes the Aegis harder to maneuver during high-intensity waves.
3.  **Tactical Deployment:** Dropping off humans at the Hangar triggers a **Deployment Animation**.
    *   *Result:* A squad of 3â€“5 armed operatives exits the Hangar to join the fray on the ground below.

### 3.2. Core Loop
1.  **System Map:** Choose Defense (Threatened) or Assault (Occupied).
2.  **Combat:** Pilot the Aegis -> Rescue Humans -> Deploy Comrades -> Survive Waves.
3.  **Crisis:** If the Aegis is destroyed -> Enter On-Foot Command -> Rebuild at Hangar.
4.  **Extraction:** Complete Wave 15 or Destroy Base.

---

## 4. Player Mechanics & Operative Systems

### 4.1. The Aegis: Forms & Movement
**4.1.1. Interceptor Mode (Fighter Form)**
*   **Movement:** 8-directional. Inertia scales based on number of humans in cargo.
*   **Primary Weapon:** Forward blaster.
*   **Secondary:** Smart Bomb / Hyperspace.

**4.1.2. Bulwark Mode (Guardian Replacement)**
*   **Activation:** Toggle button.
*   **Movement:** Drastically slowed.

### 4.2. Operative AI & Combat Behavior ("The Comrades")
These soldiers provide "fire-and-forget" support, making the battlefield feel alive.

**4.2.1. Formation Tactics**
*   Comrades move in small fire teams.
*   They automatically engage the nearest threat but will prioritize protecting the player if the player is on foot.

**4.2.2. Weapon Scaling**
*   Operatives start with basic rifles.
*   **Tier Overflow:** If the player picks up a Weapon Power-Up while the Aegis is already at **Tier 3 (Max)**, the "excess" power is distributed to ground troops, upgrading their fire rate or damage output permanently for that mission.

**4.2.3. Operative Classes**
| Operative Type | Rarity | Combat Behavior & Abilities |
| :--- | :--- | :--- |
| **Standard Infantry** | Common (65%) | Equipped with a rapid-fire rifle; auto-fires at nearest enemy. Moves in small squads to provide basic screen coverage. |
| **Heavy Gunner** | Uncommon (20%) | High DPS unit with a Gatling-style weapon. Slows down to a "braced" position to shred through Bombers or Pods. |
| **Saboteur** | Elite (5%) | Specifically targets **Enemy Ground Bases** in Assault Missions. Uses EMP grenades to disable Turrets and Shield Generators. |

### 4.3. On-Foot Command (Ship Destruction)
If the Aegis is destroyed, the game does not end. The pilot ejects, and the genre shifts to a run-and-gun survival mode.

**4.3.1. Squad Leader Aura**
*   When on foot, nearby Comrades stop patrolling and follow the player's movement exactly.
*   **Visual:** This creates a "Bullet Hell" wall of return fire (similar to "Options" in *Gradius*), concentrating firepower wherever the pilot moves.

**4.3.2. Extraction Defense (Rebuild Mechanic)**
*   To rebuild the Aegis, the pilot must reach the **Fortified Hangar** (Drop-off point) and stand their ground.
*   **Sacrifice:** While the "Ship Rebuild" timer ticks down, Comrades will physically body-block incoming enemy fire, sacrificing themselves to ensure the pilot gets back in the air.

### 4.4. Power-Up System
**4.4.1. Core Upgrades**
*   **Weapons:** Laser, Spread Shot, Homing Missiles (3 Tiers each).
*   **Defense:** Shields, Speed Boost.
*   **Utility:** Smart Bombs, Score Multipliers.

**4.4.2. Advanced Systems**
*   **Weapon Decay:** Power-ups have duration; encourages aggression.
*   **Mystery Drops:** Random effects/Jackpots.
*   **Assault Rewards:** Destroying base sections reveals rare power-ups.

---

## 5. Enemy Design

### 5.1. Core Enemy Types
*   **Lander:** Descends to capture humans. If successful, ascends.
*   **Mutant:** Created from captured humans. Aggressive seeker.
*   **Bomber:** Drops mines; area denial.
*   **Pod:** Releases swarms of smaller enemies.
*   **Baiter:** Spawns if the player takes too long (anti-camping).
*   **Swarmer:** Fast, weak, overwhelms in groups.

### 5.2. Advanced Behaviors
*   **Kamikaze:** Charges and explodes on contact.
*   **Shield:** Absorbs shots; requires flanking or piercing.
*   **Sniper:** Stationary; fires high-speed shots after a delay.
*   **Healer (Regenerator):** Heals nearby biological enemies (Mutants).

### 5.3. Bosses
*   **Mega Lander:** Giant UFO with tentacles.
*   **Titan Mutant:** Massive humanoid with multiple arms.
*   **Leviathan Baiter:** Serpentine sea-monster silhouette.
*   **Fortress Turret:** Multi-barrel stationary platform.

### 5.4. Base Defenses (Assault Only)
*   **Turrets:** Auto-targeting. Saboteurs can disable these.
*   **Shield Generators:** Protect the core. Must be destroyed first.
*   **Garrison Forces:** Elite troops that only spawn within base perimeters.

---

## 6. Game Systems & UI

### 6.1. Radar / HUD
*   **Mini-Radar:** Shows Player, Comrades (Blue dots), Mutants/Enemies (Red dots), Pickups.
*   **Engagement Tracking:** A "Combo Meter" that does not reset as long as the player moves toward an objective (Flow state).
*   **Visual Urgency:** Radar pulses faster as "Near-Miss" timers approach zero.

### 6.2. Scoring & Rewards
*   **Points:** Kills, Rescues, Base Destruction.
*   **Comrade Bonus:** Significant points for every Operative alive at mission end.
*   **Reconversion:** Rescuing a human from a Lander/Mutant grants bonus points.

---

## 7. Progression & Modes

### 7.1. Planetary Liberation Campaign
*   **Structure:** Start with ~40% friendly districts.
*   **Dynamic:** Failed defenses lead to Occupied districts (Assault missions).
*   **Endgame:** Secure 100% of districts to unlock the Mothership.

### 7.2. Mission Types
*   **Defense:** 15 Waves. Focus on keeping the Fortified Hangar safe and deploying troops.
*   **Assault:** Destroy Enemy Base. Saboteurs and Bulwark Mode are highly effective here.
*   **Mothership:** The final "Boss Rush" style level.

### 7.3. Challenges
*   **"Last Stand":** Infinite waves, global leaderboard.
*   **"Assault Only":** All districts start Occupied.

---

## 8. Environment & Audio

### 8.1. Environment
*   **Layers:** Parallax cityscape (Industrial, Residential, Military).
*   **Destruction:** Buildings take damage from enemy fire and crashed ships.
*   **Weather:** Rain/Fog affects visibility.

### 8.2. Audio Design
*   **Music:** Adaptive layers (Atmospheric -> High Energy -> Boss).
*   **SFX:** Distinct weapon sounds. "Casino-style" sounds for Shop and Deployment.
*   **Feedback:**
    *   **Rescue:** Satisfying "Lock-and-Load" sound when beaming up humans.
    *   **Deployment:** Sound of boots hitting the ground and radio chatter ("Squad deployed!") when dropping off at the Hangar.

---

## 9. Key Design Changes Summary 
*   **Resource vs. Score:** Humans are now ammunition for the ground war via the "Strike Force" Carry and Deployment system.
*   **Inertia Mechanic:** Carrying humans adds weight, creating a risk/reward balance.
*   **Operative Depth:** Added 3 distinct classes (Infantry, Gunner, Saboteur) and AI behaviors (Defensive Perimeter).
*   **Weapon Synergy:** Tier 3 ship overflow upgrades ground troops.
*   **Second Chance Mechanic:** On-Foot Command turns the pilot into a Squad Leader, using "Bullet Hell" squad tactics and "Sacrifice" mechanics to rebuild the Aegis.